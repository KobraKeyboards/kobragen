points:
  zones:
    matrix:
      columns:
        one.key.column_net: P1
        two.key.column_net: P2
        three.key.column_net: P3
        four.key.column_net: P4

        five:
          key.column_net: P5
          rows:
            # Move the diodes to above the switch to make it work with the additional switch holes
            modrow: &2u_key_diode
              footprints:
                diode.anchor.shift: [0, 0.5u]
            alternative_modrow: &2u_key
              skip: false
              shift: [0.5u, 1u]
              rotate: 180

        six:
          key.column_net: P6
          rows:
            modrow: *2u_key_diode
            # This overrides the `key` footprint for this specific row-column apparently
            top: &key_on_top_of_controller
              rotate: 180
              footprints:
                diode.anchor.shift: [0, -0.2u]
            alternative_modrow: *2u_key

        seven:
          key.column_net: P7
          rows:
            modrow: *2u_key_diode
            top: *key_on_top_of_controller
            alternative_modrow: *2u_key

        eight:
          key.column_net: P8
          rows:
            modrow: *2u_key_diode

        nine.key.column_net: P9
        ten.key.column_net: P10
        eleven.key.column_net: P11
        twelve.key.column_net: P12
      rows:
        alternative_modrow:
          row_net: P24
          skip: true
          # Override the footprints for each key in this row
          footprints:
            mx:
              params:
                keycaps: false
        modrow:
          row_net: P24
          footprints: &diode
            diode:
              type: diode
              anchor.shift: [0, -0.25u]
              nets:
                from: =colrow
                to: =row_net
              params:
                via_in_pad: false
                through_hole: true
        bottom:
          row_net: P23
          footprints: *diode
        middle:
          row_net: P22
          footprints: *diode
        top:
          row_net: P21
          footprints: *diode
  key:
    bind: 2
    footprints:
      mx:
        type: mx
        anchor:
        nets:
          from: =colrow
          to: =column_net
        params:
          hotswap: true
          keycaps: true

pcbs:
  example:
    footprints:
      promicro:
        type: promicro
        anchor:
          ref: matrix_seven_top
          shift: [0.5u, 0.04u]
        params:
          orientation: down
